{% extends 'base.html' %} {% block conteudo %}

<div class="container-contato">
  <h1>Contato</h1>
  <hr />
  <br />

  <div class="contato-grid">
    <!-- Informações de contato -->
    <div class="contato-info">
      <h3>Informações de Contato</h3>
      <div class="info-item">
        <i class="fas fa-envelope"></i>
        <p>katy_ane@yahoo.com.br</p>
      </div>
      <div class="info-item">
        <i class="fas fa-phone"></i>
        <p>(11) 9 9535-7525</p>
      </div>
      <div class="info-item">
        <i class="fas fa-map-marker-alt"></i>
        <p>São José dos Campos - SP</p>
      </div>

      <div class="social-links-contato">
        <a
          href="https://github.com/Katianefatec"
          target="_blank"
          class="social-btn"
        >
          <i class="fab fa-github"></i> GitHub
        </a>
        <a
          href="https://www.linkedin.com/in/katiane-soares-4b8193245/"
          target="_blank"
          class="social-btn"
        >
          <i class="fab fa-linkedin"></i> LinkedIn
        </a>
      </div>
    </div>

    <!-- Formulário de contato -->
    <div class="contato-form">
      <h3>Envie-me uma mensagem</h3>
      <form id="formulario-contato" action="/enviar-mensagem" method="POST">
        <div class="form-group">
          <label for="nome">Nome</label>
          <input type="text" id="nome" name="nome" required />
        </div>

        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" id="email" name="email" required />
        </div>

        <div class="form-group">
          <label for="assunto">Assunto</label>
          <input type="text" id="assunto" name="assunto" required />
        </div>

        <div class="form-group">
          <label for="mensagem">Mensagem</label>
          <textarea id="mensagem" name="mensagem" rows="5" required></textarea>
        </div>

        <button type="submit" class="btn-enviar">Enviar Mensagem</button>
      </form>
      <div id="form-status" class="hidden"></div>
    </div>
  </div>
</div>

<script>
  // Script para manipular o envio do formulário usando AJAX
  document
    .getElementById("formulario-contato")
    .addEventListener("submit", function (e) {
      e.preventDefault();

      const formData = new FormData(this);
      const formStatus = document.getElementById("form-status");
      const submitButton = document.querySelector(".btn-enviar");

      // Desabilitar o botão durante o envio
      submitButton.disabled = true;
      submitButton.textContent = "Enviando...";

      // Enviar os dados via AJAX
      fetch("/enviar-mensagem", {
        method: "POST",
        body: formData,
      })
        .then((response) => response.json())
        .then((data) => {
          if (data.status === "success") {
            formStatus.textContent =
              "Mensagem enviada com sucesso! Em breve entrarei em contato.";
            formStatus.className = "success";
            this.reset(); // Limpar o formulário
          } else {
            formStatus.textContent =
              data.message || "Ocorreu um erro ao enviar a mensagem.";
            formStatus.className = "error";
          }

          formStatus.style.display = "block";

          // Habilitar o botão novamente
          submitButton.disabled = false;
          submitButton.textContent = "Enviar Mensagem";

          // Ocultar a mensagem após alguns segundos
          setTimeout(() => {
            formStatus.style.display = "none";
          }, 5000);
        })
        .catch((error) => {
          console.error("Erro:", error);
          formStatus.textContent =
            "Erro de conexão. Tente novamente mais tarde.";
          formStatus.className = "error";
          formStatus.style.display = "block";

          // Habilitar o botão novamente
          submitButton.disabled = false;
          submitButton.textContent = "Enviar Mensagem";
        });
    });
</script>
{% endblock %}
